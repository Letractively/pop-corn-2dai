<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>

        <title>

        </title>

        <p:resources/>
    </h:head>
    <h:body>
        <p:growl showDetail="true" id="mensajes"/>

        <p:panel  rendered="#{quedada != null and quedada.id != null}">

            #{msg.quedada}: #{quedada.root.nombre}<br/>
            #{msg.clave_administrador_quedada}: #{quedada.claveAdmin}<br/>
            #{msg.clave_invitado_quedada}: #{quedada.claveInvitado}<br/><br/>
            <h:form prependId="false">
                <p:calendar value="#{fechasController.fecha}" required="true" locale="es" lang="es" />
                &#160;        
                <p:commandButton value="#{msg.addFecha}" ajax="false" action="addFecha" update="fechas, mensajes"/>

            </h:form>
            <center><h:form>
                    <p:commandButton action="quedadaMainForm" ajax="false" value="#{msg.btn_anterior}" />
                    <p:commandButton title="#{msg.btn_terminar}" value="#{msg.btn_terminar}" onclick="dlg.show()" />
                </h:form></center>
            <h:form prependId="false">
                <p:dataTable  id="fechas" value="#{fechas.ingredientes}" rendered="#{not empty fechas.ingredientes  }"
                              var="ifecha" emptyMessage="#{msg['no_fechas']}" binding="#{fechasController.tabla}">

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="#{msg.fecha}" />
                        </f:facet>
                        <h:outputText value="#{ifecha}" converter="com.jquedada.view.FechaConverter"  />
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="#{msg.accion}"/>
                        </f:facet>

                        <ui:remove>
                            http://www.nofluffjuststuff.com/blog/max_katz/2009/02/how_to_delete_a_row_in_jsf
                        </ui:remove>

                        <p:commandButton value="#{msg.btn_borrar_fecha}" action="borrarFecha" ajax="false">
                            <f:setPropertyActionListener value="#{ifecha}" target="#{fechasController.keyFecha}" />
                        </p:commandButton>

                    </p:column>


                </p:dataTable>
            </h:form>



            <ui:include src="dialog_recordatorio.xhtml"></ui:include>




        </p:panel>



        <br/>
        <center><h:outputLink value="/index.html">#{msg.ir_a_inicio}</h:outputLink></center>

    </h:body>
</html>